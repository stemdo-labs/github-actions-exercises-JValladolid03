name: Workflow Jobs EJ1  #Nombre del workflow

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  tareas: #Crear job
    runs-on: labs-runner #Asignarle runner
    steps: #Crear tareas
      - name: Mostrar fecha y hora actual
        run: date
      - name: Crear archivo de texto
        run: touch jvl.txt
      - name: Listar archivos en el directorio actual
        run: ls
      - name: Checkout del repositorio
        uses: actions/checkout@v3
        with:
          sparse-checkout: |
            jvl.txt
          sparse-checkout-cone-mode: false
      - name: Hacer commit y push de cualquier fichero en el repositorio
        #Conetar cuenta al repositorio, aÃ±adir archivo creado y hacer commit y push
        run: |
          git config --global user.name "JValladolid03"
          git config --global user.email jvalladolid@stemdo.io
          git clone https://github.com/stemdo-labs/github-actions-exercises-JValladolid03.git
          cd github-actions-exercises-JValladolid03
          git pull origin main
          date > jvl.txt
          git add jvl.txt
          git commit -m "Commit desde GitHub Actions" || echo "Error al subir"
          git push